<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Workday Countdown</title>

    <link rel="icon" type="image/svg+xml" href="favicon.svg" />
    <link rel="stylesheet" href="src/styles/tokens.css" />
    <link rel="stylesheet" href="styles.css" />
  </head>


  <body>
    <!-- SVG Sprite -->
    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
      <defs>
        <linearGradient id="g1" x1="4" y1="4" x2="20" y2="20">
          <stop stop-color="var(--accent)" />
          <stop offset="1" stop-color="var(--accent-2)" />
        </linearGradient>
        <linearGradient id="g2" x1="12" y1="4" x2="18" y2="14">
          <stop stop-color="var(--accent)" />
          <stop offset="1" stop-color="var(--accent-2)" />
        </linearGradient>
      </defs>
      <symbol id="icon-clock" viewBox="0 0 24 24" fill="none">
        <path
          d="M4 12a8 8 0 0 1 16 0"
          stroke="url(#g1)"
          stroke-width="2"
          stroke-linecap="round"
        />
        <path
          d="M12 4v8l4 2"
          stroke="url(#g2)"
          stroke-width="2"
          stroke-linecap="round"
        />
      </symbol>
      <symbol id="icon-sliders" viewBox="0 0 24 24" fill="none">
        <path
          d="M3 6h10M3 12h18M3 18h12"
          stroke="currentColor"
          stroke-width="1.8"
          stroke-linecap="round"
        />
        <rect x="14" y="4.5" width="7" height="3" rx="1.5" fill="currentColor" />
        <rect x="7" y="16.5" width="7" height="3" rx="1.5" fill="currentColor" />
      </symbol>
      <symbol id="icon-grid" viewBox="0 0 24 24" fill="none">
        <path
          d="M3 12h18M12 3v18"
          stroke="currentColor"
          stroke-width="1.5"
          stroke-linecap="round"
        />
      </symbol>
      <symbol id="icon-calendar" viewBox="0 0 24 24" fill="none">
        <path
          d="M7 3v3M17 3v3M4 9h16M4 7a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V9Z"
          stroke="currentColor"
          stroke-width="1.5"
          stroke-linecap="round"
        />
      </symbol>
      <symbol id="icon-plus" viewBox="0 0 24 24" fill="none">
        <path
          d="M12 5v14M5 12h14"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
        />
      </symbol>
      <symbol id="icon-trash" viewBox="0 0 24 24" fill="none">
        <path
          d="M4 7h16M9 7V5h6v2m-9 0 1 12a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2l1-12"
          stroke="currentColor"
          stroke-width="1.8"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
      </symbol>
      <symbol id="icon-clock-simple" viewBox="0 0 24 24" fill="none">
        <path
          d="M12 6v6l4 2"
          stroke="currentColor"
          stroke-width="1.8"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
      </symbol>
      <symbol id="icon-play" viewBox="0 0 24 24" fill="none">
        <path
          d="M8 5v14l11-7L8 5z"
          fill="currentColor"
        />
      </symbol>
      <symbol id="icon-pause" viewBox="0 0 24 24" fill="none">
        <rect x="6" y="4" width="4" height="16" fill="currentColor" />
        <rect x="14" y="4" width="4" height="16" fill="currentColor" />
      </symbol>
      <symbol id="icon-stop" viewBox="0 0 24 24" fill="none">
        <rect x="5" y="5" width="14" height="14" fill="currentColor" />
      </symbol>
      <symbol id="icon-palette" viewBox="0 0 24 24" fill="none">
        <path
          d="M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10c.55 0 1-.45 1-1 0-.27-.11-.52-.29-.71-.17-.19-.29-.44-.29-.71 0-.55.45-1 1-1h1.17c3.03 0 5.5-2.47 5.5-5.5C20.09 5.82 16.42 2 12 2zm-5.5 9c-.83 0-1.5-.67-1.5-1.5S5.67 8 6.5 8 8 8.67 8 9.5 7.33 11 6.5 11zm3-4C8.67 7 8 6.33 8 5.5S8.67 4 9.5 4s1.5.67 1.5 1.5S10.33 7 9.5 7zm5 0c-.83 0-1.5-.67-1.5-1.5S13.67 4 14.5 4s1.5.67 1.5 1.5S15.33 7 14.5 7zm3 4c-.83 0-1.5-.67-1.5-1.5S16.67 8 17.5 8s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"
          fill="currentColor"
        />
      </symbol>
    </svg>

    <header>
      <div class="brand">
        <svg aria-hidden="true"><use href="#icon-clock"></use></svg>
        <span>Workday Countdown</span>
      </div>
      <div class="actions">
        <button class="btn" id="themeToggleBtn" title="Theme wechseln">
          <svg aria-hidden="true"><use href="#icon-palette"></use></svg>
          Theme
        </button>
        <button class="btn" id="openSettingsBtn" title="Einstellungen">
          <svg aria-hidden="true"><use href="#icon-sliders"></use></svg>
          Einstellungen
        </button>
      </div>
    </header>

    <main class="center">
      <div class="stack">
        <!-- Dual countdowns -->
        <div id="countdownBig" class="countdown-big">–:–</div>
        <div id="labelBig" class="subtitle">…</div>

        <div id="countdownSmall" class="countdown-small">–:–</div>
        <div id="labelSmall" class="subtitle">…</div>

        <div class="progress-wrap" aria-hidden="false">
          <div
            class="progress"
            id="progress"
            role="progressbar"
            aria-valuemin="0"
            aria-valuemax="100"
            aria-valuenow="0"
          >
            <div class="bar" id="progressBar"></div>
          </div>
          <div class="progress-meta">
            <span id="progressStart">–:–</span>
            <span id="progressNow"></span>
            <span id="progressEnd">–:–</span>
          </div>
        </div>

        <!-- CTA Buttons -->
        <div class="cta-buttons">
          <button class="btn btn-cta btn-start" id="startBtn" title="Start timer">
            <svg aria-hidden="true"><use href="#icon-play"></use></svg>
            Start
          </button>
          <button class="btn btn-cta btn-pause" id="pauseBtn" title="Pause timer" style="display: none;">
            <svg aria-hidden="true"><use href="#icon-pause"></use></svg>
            Pause
          </button>
          <button class="btn btn-cta btn-stop" id="stopBtn" title="Stop timer" style="display: none;">
            <svg aria-hidden="true"><use href="#icon-stop"></use></svg>
            Stop
          </button>
        </div>
      </div>
    </main>

    <footer>
      <span></span>
      <div class="actions"><!-- (ehem. Presets entfernt) --></div>
    </footer>

    <!-- Settings Overlay -->
    <div class="overlay" id="overlay" aria-hidden="true">
      <section
        class="panel"
        role="dialog"
        aria-modal="true"
        aria-labelledby="panelTitle"
      >
        <h3 id="panelTitle">Einstellungen</h3>

        <!-- Anzeige: Segmented Control -->
        <div class="card" id="layoutCard">
          <div class="card-head">
            <div class="icon">
              <svg aria-hidden="true" width="18" height="18"><use href="#icon-grid"></use></svg>
              <span>Anzeige</span>
            </div>
          </div>
          <div class="segmented" role="tablist" aria-label="Anzeigeumschaltung">
            <input
              type="radio"
              id="layout-total"
              name="layout"
              value="big-total"
            />
            <label for="layout-total">
              <b>Gesamt</b>
              <small>Kleiner: Pause</small>
            </label>

            <input
              type="radio"
              id="layout-break"
              name="layout"
              value="big-break"
            />
            <label for="layout-break">
              <b>bis Pause</b>
              <small>Kleiner: Gesamt</small>
            </label>
          </div>
        </div>

        <!-- Themes (Pills) -->
        <div class="card" id="themeCard">
          <div class="theme-grid" id="themeGrid"></div>
        </div>

        <div class="card">
          <h3>Neues Theme hinzufügen / bearbeiten</h3>
          <div class="theme-manager">
            <div class="field">
              <label for="themeName">Theme-Name</label>
              <input
                type="text"
                id="themeName"
                class="input"
                placeholder="Theme # wird automatisch gesetzt"
              />
            </div>
            <div class="field">
              <label>Primärfarbe</label>
              <input type="color" id="accentColor" value="#6ea8fe" />
            </div>
            <div class="field">
              <label>Sekundärfarbe</label>
              <input type="color" id="accent2Color" value="#b17aff" />
            </div>
            <div class="field">
              <label>Hintergrundfarbe</label>
              <input type="color" id="bgColor" value="#0b0c0f" />
            </div>
            <div class="field">
              <label for="bgImage">Bild-URL (optional)</label>
              <input
                type="text"
                id="bgImage"
                class="input"
                placeholder="https://a.jpg, https://b.jpg, … (Komma-getrennt für Daily)"
              />
            </div>

            <!-- Bing Daily pro Theme -->
            <div class="field">
              <label for="useBingDaily">Tägliches Bild von Bing</label>
              <input type="checkbox" id="useBingDaily" />
            </div>
            <div class="field" id="bingOptions" style="display: none">
              <label for="bingMarket">Bing-Markt</label>
              <select id="bingMarket" class="input">
                <option value="de-DE" selected>de-DE (Deutschland)</option>
                <option value="en-US">en-US (USA)</option>
                <option value="en-GB">en-GB (UK)</option>
                <option value="fr-FR">fr-FR (Frankreich)</option>
                <option value="es-ES">es-ES (Spanien)</option>
                <option value="it-IT">it-IT (Italien)</option>
                <option value="ja-JP">ja-JP (Japan)</option>
              </select>
              <button class="btn" id="refreshBing">Bild aktualisieren</button>
            </div>

            <div class="actions">
              <button id="addThemeBtn" class="btn primary">
                Theme hinzufügen
              </button>
              <button id="cancelEditBtn" class="btn" style="display: none">
                Abbrechen
              </button>
            </div>
          </div>
        </div>

        <!-- Regeln -->
        <div class="card" id="rulesCard">
          <div class="card-head">
            <div class="icon">
              <svg aria-hidden="true"><use href="#icon-calendar"></use></svg>
              <span>Regeln</span>
            </div>
            <button class="btn" id="addRuleBtn2" title="Regel hinzufügen">
              <svg aria-hidden="true"><use href="#icon-plus"></use></svg>
              Hinzufügen
            </button>
          </div>

          <div
            id="rulesList"
            class="list"
            style="display: grid; gap: 12px"
          ></div>
        </div>

        <div class="row">
          <button class="btn primary" id="closePanel">Fertig</button>
        </div>
      </section>
    </div>

    <!-- Confetti Canvas -->
    <canvas id="confettiCanvas"></canvas>

    <script src="src/styles/theme-switcher.js"></script>
    <script src="script.js"></script>
  </body>
</html>
