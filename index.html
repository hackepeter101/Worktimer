<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Workday Countdown</title>

    <link rel="icon" type="image/svg+xml" href="favicon.svg" />
    <link rel="stylesheet" href="styles.css" />
  </head>


  <body>
    <!-- SVG Sprite -->
    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
      <symbol id="icon-clock" viewBox="0 0 24 24" fill="none">
        <circle cx="12" cy="12" r="8" stroke="currentColor" stroke-width="2"/>
        <path
          d="M12 8v4l3 2"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
        />
      </symbol>
      <symbol id="icon-sliders" viewBox="0 0 24 24" fill="none">
        <path
          d="M3 6h10M3 12h18M3 18h12"
          stroke="currentColor"
          stroke-width="1.8"
          stroke-linecap="round"
        />
        <rect x="14" y="4.5" width="7" height="3" rx="1.5" fill="currentColor" />
        <rect x="7" y="16.5" width="7" height="3" rx="1.5" fill="currentColor" />
      </symbol>
      <symbol id="icon-grid" viewBox="0 0 24 24" fill="none">
        <path
          d="M3 12h18M12 3v18"
          stroke="currentColor"
          stroke-width="1.5"
          stroke-linecap="round"
        />
      </symbol>
      <symbol id="icon-calendar" viewBox="0 0 24 24" fill="none">
        <path
          d="M7 3v3M17 3v3M4 9h16M4 7a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V9Z"
          stroke="currentColor"
          stroke-width="1.5"
          stroke-linecap="round"
        />
      </symbol>
      <symbol id="icon-plus" viewBox="0 0 24 24" fill="none">
        <path
          d="M12 5v14M5 12h14"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
        />
      </symbol>
      <symbol id="icon-trash" viewBox="0 0 24 24" fill="none">
        <path
          d="M4 7h16M9 7V5h6v2m-9 0 1 12a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2l1-12"
          stroke="currentColor"
          stroke-width="1.8"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
      </symbol>
    </svg>

    <header>
      <div class="brand">
        <svg aria-hidden="true"><use href="#icon-clock"></use></svg>
        <span>Workday Countdown</span>
      </div>
    </header>

    <main class="center">
      <div class="stack">
        <!-- Dual countdowns -->
        <div id="countdownBig" class="countdown-big">–:–</div>
        <div id="labelBig" class="subtitle">…</div>

        <div id="countdownSmall" class="countdown-small">–:–</div>
        <div id="labelSmall" class="subtitle">…</div>

        <div class="progress-wrap" aria-hidden="false">
          <div
            class="progress"
            id="progress"
            role="progressbar"
            aria-valuemin="0"
            aria-valuemax="100"
            aria-valuenow="0"
          >
            <div class="bar" id="progressBar"></div>
          </div>
          <div class="progress-meta">
            <span id="progressStart">–:–</span>
            <span id="progressNow"></span>
            <span id="progressEnd">–:–</span>
          </div>
        </div>
      </div>
    </main>

    <footer>
      <div class="footer-settings">
        <button class="setting-btn" id="layoutBtn" title="Toggle display mode">
          <svg aria-hidden="true" width="16" height="16"><use href="#icon-grid"></use></svg>
          <span id="layoutLabel">total</span>
        </button>
        <button class="setting-btn" id="themeBtn" title="Change theme">
          <svg aria-hidden="true" width="16" height="16"><use href="#icon-sliders"></use></svg>
          <span id="themeLabel">theme #1</span>
        </button>
        <button class="setting-btn" id="rulesBtn" title="Manage rules">
          <svg aria-hidden="true" width="16" height="16"><use href="#icon-calendar"></use></svg>
          <span>rules</span>
        </button>
        <!-- Theme Selector -->
        <div class="theme-selector-wrapper">
          <label for="themeSelector" class="theme-selector-label">Theme:</label>
          <select id="themeSelector" class="theme-selector" title="Select theme">
            <option value="">Loading...</option>
          </select>
        </div>
      </div>
    </footer>

    <!-- Settings Overlay (Simplified) -->
    <div class="overlay" id="overlay" aria-hidden="true">
      <section
        class="panel simple-panel"
        role="dialog"
        aria-modal="true"
        aria-labelledby="panelTitle"
      >
        <div class="panel-header">
          <h3 id="panelTitle">settings</h3>
          <button class="close-btn" id="closePanel" aria-label="Close">×</button>
        </div>

        <div class="simple-settings" id="settingsContent">
          <!-- Content loaded dynamically based on which button was clicked -->
        </div>
      </section>
    </div>

    <!-- Welcome Popup -->
    <div class="overlay" id="welcomeOverlay" aria-hidden="true">
      <section
        class="panel welcome-panel"
        role="dialog"
        aria-modal="true"
        aria-labelledby="welcomeTitle"
      >
        <div class="panel-header">
          <h3 id="welcomeTitle">Welcome</h3>
          <button class="close-btn" id="closeWelcome" aria-label="Close">×</button>
        </div>
        <div class="welcome-content" id="welcomeContent">
          <!-- Markdown content will be loaded here -->
        </div>
      </section>
    </div>

    <!-- Confetti Canvas -->
    <canvas id="confettiCanvas"></canvas>

    <script src="src/markdownParser.js"></script>
    <script src="src/themeManager.js"></script>
    <script src="script.js"></script>
    <script>
      // Initialize theme manager on page load
      document.addEventListener('DOMContentLoaded', async () => {
        await window.themeManager.init();
        window.themeManager.initThemeSelector('#themeSelector');
      });
    </script>
  </body>
</html>
